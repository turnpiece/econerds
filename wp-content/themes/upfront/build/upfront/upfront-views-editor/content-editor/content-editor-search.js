!function(e){Upfront.Settings&&Upfront.Settings.l10n?Upfront.Settings.l10n.global.views:Upfront.mainData.l10n.global.views;define(["text!upfront/templates/popup.html"],function(t){return Backbone.View.extend({id:"upfront-entity_list-search",searchTpl:_.template(e(t).find("#upfront-search-tpl").html()),events:{"click #upfront-search_action":"dispatch_search_click","keydown #upfront-list-search_input":"dispatch_search_enter"},render:function(){var e=!!this.collection.lastFetchOptions&&this.collection.lastFetchOptions.search;this.$el.html(this.searchTpl({query:e}))},dispatch_search_click:function(t){return e("#upfront-search_container").is(":visible")?this.handle_search_request(t):this.handle_search_reveal(t)},dispatch_search_enter:function(e){if(13==e.which)return this.handle_search_request(e)},handle_search_request:function(t){t.preventDefault();var n=e("#upfront-search_container input").val();this.collection.fetch({search:n})},handle_search_reveal:function(){e("#upfront-search_container").show()}})})}(jQuery);